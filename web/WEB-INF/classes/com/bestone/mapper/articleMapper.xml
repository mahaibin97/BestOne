<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.bestone.dao.ArticleDao">


    <!-- 查询单个文章 -->
    <select id="findOneArticle" parameterType="articleModel">
        select *
        from article
        where article.article_id = #{article_id}
    </select>

    <!-- 创建文章 -->
    <insert id="addArticle" parameterType="articleModel">
        insert into
--           article(article_id,title,article_text,phoneNum,overview,thumbsUp,`time`)
            article(title,article_text)
        values
               (#{title},#{article_text})
--                (#{article_id},#{title},#{article_text},#{phoneNum},#{overview},#{thumbsUp},#{time})
    </insert>

    <!-- 查询当前登录用户发表的所有文章 -->

    <select id="findArticle" parameterType="articleModel" resultMap="ArticleList">
        SELECT *
        FROM article
        where users.phoneNum=article.phoneNum and users.phoneNum=#{phoneNum};
    </select>

    <resultMap id="ArticleList" type="ArticleModel">
        <id property="article_id" column="article_id"/>
        <result property="title" column="title"/>
        <result property="article_text" column="article_text"/>
    </resultMap>


    <!--<resultMap id="resultUserArticleList" type="UserAndArticleModel">-->
        <!--<id property="article_id" column="aid"/>-->
        <!--<result property="title" column="title"/>-->
        <!--<result property="article_text" column="article_text"/>-->

        <!--<association property="user" javaType="UserModel">-->
            <!--<id property="phoneNum" column="phoneNum"/>-->
            <!--<result property="userName" column="userName"/>-->

        <!--</association>-->
    <!--</resultMap>-->

    <!--<select id="findArticles" parameterType="int" resultMap="resultUserArticleList">-->
        <!--select user.phoneNum,user.userName,article.id aid,article.title,article.article_text-->
        <!--from user,article-->
        <!--where user.id=article.phoneNum and user.phoneNum=#{phoneNum}-->
    <!--</select>-->
</mapper>

